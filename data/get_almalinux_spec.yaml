# Shared configuration that is common across all AlmaLinux versions.
# Individual versions can still override pieces of this under their own
# blocks (e.g. `containerDefaults`) if necessary.
common:
  # Shared container configuration used by the Get AlmaLinux Containers section.
  # This lives under `common.container` to mirror the `container` pattern/section
  # name used elsewhere in the spec and generated data.
  iso:
    # All versions use the same ISO layout: we list the variants we want
    # and let the generator expand them into per-arch URLs and checksums.
    base: "https://repo.almalinux.org/almalinux/{major}/isos/{arch}/AlmaLinux-{full}-{arch}-{variant}.iso"
    variants: ["dvd", "boot", "minimal"]
    mirrorsUrl: "https://mirrors.almalinux.org/isos/{arch}/{full}.html"
    torrentUrl: "https://repo.almalinux.org/almalinux/{full}/isos/{arch}/AlmaLinux-{full}-{arch}.torrent"
    checksumUrl: "https://repo.almalinux.org/almalinux/{full}/isos/{arch}/CHECKSUM"
  cloud:
    genericCloud:
      imageUrl: "https://repo.almalinux.org/almalinux/{major}/cloud/{arch}/images/AlmaLinux-{major}-GenericCloud-latest.{arch}.qcow2"
      checksumUrl: "https://repo.almalinux.org/almalinux/{major}/cloud/{arch}/images/CHECKSUM"
    azure:
      # Azure supports per-arch marketplace URLs; the generator will pick
      # the right one from `marketplaceUrls` when present.
      marketplaceUrls:
        x86_64: "https://azuremarketplace.microsoft.com/en-us/marketplace/apps/almalinux.almalinux-x86_64"
        aarch64: "https://azuremarketplace.microsoft.com/en-us/marketplace/apps/almalinux.almalinux-arm"
    openNebula:
      imageUrl: "https://repo.almalinux.org/almalinux/{major}/cloud/{arch}/images/AlmaLinux-{major}-OpenNebula-latest.{arch}.qcow2"
      checksumUrl: "https://repo.almalinux.org/almalinux/{major}/cloud/{arch}/images/CHECKSUM"
    oci:
      partnerListingUrl: "https://cloudmarketplace.oracle.com/marketplace/en_US/partners/125035508"
  container:
    platformImages:
      rows:
        - imageLabel: Default (Platform)
          tag: almalinux:latest
          repoUrl: https://hub.docker.com/_/almalinux
          repoLabel: hub.docker.com/_/almalinux
        - imageLabel: Minimal (Platform)
          tag: almalinux:minimal
          repoUrl: https://hub.docker.com/_/almalinux
          repoLabel: hub.docker.com/_/almalinux
    ubiAlternatives:
      images:
        - name: Minimal
          suffix: minimal
        - name: Base
          suffix: base
        - name: Init
          suffix: init
        - name: Micro
          suffix: micro
    bootc:
      repoUrl: "https://quay.io/repository/almalinuxorg/almalinux-bootc"
  live:
    checksumUrl: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/CHECKSUM"
  raspberrypi:
    # Raspberry Pi images are aarch64-only.
    arches: ["aarch64"]
    url: "https://repo.almalinux.org/almalinux/{major}/raspberrypi/images/"
  vagrant:
    registryUrls:
      x86_64: "https://portal.cloud.hashicorp.com/vagrant/discover/almalinux/{major}"
      x86_64_v2: "https://portal.cloud.hashicorp.com/vagrant/discover/almalinux/{major}-{arch}"
      aarch64: "https://portal.cloud.hashicorp.com/vagrant/discover/almalinux/{major}"
  incusLxc:
    urls:
      x86_64: "https://images.linuxcontainers.org/images/almalinux/{major}/amd64/"
      aarch64: "https://images.linuxcontainers.org/images/almalinux/{major}/arm64/"

# The ordering of versions in this file determines the ordering of the tabs
# on the Get AlmaLinux page; list the newest version first.
versions:
  - id: "10"
    label: "AlmaLinux 10"
    # The list of supported architectures for this version.
    arches: ["x86_64", "x86_64_v2", "aarch64", "s390x", "ppc64le"]
    patterns:
      iso:
      cloud:
        # Top-level `arches` here means "cloud images exist only for these arches".
        arches: ["x86_64", "x86_64_v2", "aarch64", "s390x"]
        aws:
          # Nested `arches` further narrow support for this provider only.
          arches: ["x86_64", "aarch64"]
          sellerProfileUrl: "https://aws.amazon.com/marketplace/seller-profile?id=529d1014-352c-4bed-8b63-6120e4bd3342"
          marketplaceUrls:
            x86_64: "https://aws.amazon.com/marketplace/pp/prodview-tommf6drdxv4w"
            aarch64: "https://aws.amazon.com/marketplace/pp/prodview-kh5sf2hbb7rnw"
        azure:
          arches: ["x86_64", "aarch64"]
        openNebula:
          arches: ["x86_64", "x86_64_v2", "aarch64"]
        oci:
          arches: ["x86_64", "aarch64"]
          marketplaceUrls:
            x86_64: "https://cloudmarketplace.oracle.com/marketplace/en_US/listing/189119150"
            aarch64: "https://cloudmarketplace.oracle.com/marketplace/en_US/listing/189119919"
      container:
        bootc:
          arches: ["x86_64", "x86_64_v2", "aarch64"]
      live:
        # Live media exist only for the listed arches; the generator expands
        # each variant below into arch-specific URLs and a shared checksum URL.
        arches: ["x86_64", "x86_64_v2", "aarch64"]
        variants:
          gnome:
            label: "GNOME"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-GNOME.iso"
          kde:
            label: "KDE"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-KDE.iso"
      raspberrypi:
        arches: ["aarch64"]
      vagrant:
        arches: ["x86_64", "x86_64_v2", "aarch64"]
      incusLxc: # Empty block, not supported on 10

  - id: "10-kitten"
    label: "AlmaLinux 10 Kitten"
    # The list of supported architectures for this version.
    arches: ["x86_64", "x86_64_v2", "aarch64", "s390x", "ppc64le"]
    patterns:
      iso:
        base: "https://kitten.repo.almalinux.org/{major}/isos/{arch}/AlmaLinux-Kitten-10-latest-{arch}-{variant}.iso"
        mirrorsUrl: "" # TODO: Fix
        torrentUrl: "" # TODO: Fix?
        checksumUrl: "https://kitten.repo.almalinux.org/{major}/isos/{arch}/CHECKSUM"
      cloud:
        # Top-level `arches` here means "cloud images exist only for these arches".
        arches: ["x86_64", "x86_64_v2", "aarch64", "s390x"]
        aws:
          # Nested `arches` further narrow support for this provider only.
          arches: ["x86_64", "aarch64"]
          sellerProfileUrl: "https://aws.amazon.com/marketplace/seller-profile?id=529d1014-352c-4bed-8b63-6120e4bd3342"
          marketplaceUrls:
            x86_64: "https://aws.amazon.com/marketplace/pp/prodview-j3zhkcd5ys6vg"
            aarch64: "https://aws.amazon.com/marketplace/pp/prodview-5ap2rmg7bsfsu"
        genericCloud:
          imageUrl: "https://kitten.repo.almalinux.org/{major}/cloud/{arch}/images/AlmaLinux-Kitten-GenericCloud-10-latest.{arch}.qcow2"
          checksumUrl: "https://kitten.repo.almalinux.org/{major}/cloud/{arch}/images/CHECKSUM"
        azure:
          arches: ["x86_64", "aarch64"]
          marketplaceUrls:
            x86_64: "https://azuremarketplace.microsoft.com/en-us/marketplace/apps/almalinux.kitten"
            aarch64: "https://azuremarketplace.microsoft.com/en-us/marketplace/apps/almalinux.kitten" # TODO: Fix?
        openNebula:
          arches: ["x86_64", "x86_64_v2", "aarch64"]
          imageUrl: "https://kitten.repo.almalinux.org/{major}/cloud/{arch}/images/AlmaLinux-Kitten-OpenNebula-10-latest.{arch}.qcow2"
          checksumUrl: "https://kitten.repo.almalinux.org/{major}/cloud/{arch}/images/CHECKSUM"
        oci: # No Kitten on OCI
      container:
        bootc:
          arches: ["x86_64", "x86_64_v2", "aarch64"]
      live:
        # Live media exist only for the listed arches; the generator expands
        # each variant below into arch-specific URLs and a shared checksum URL.
        arches: ["x86_64", "x86_64_v2", "aarch64"]
        checksumUrl: "https://kitten.repo.almalinux.org/{major}/live/{arch}/CHECKSUM"
        variants:
          gnome:
            label: "GNOME"
            url: "https://kitten.repo.almalinux.org/{major}/live/{arch}/AlmaLinux-Kitten-10-latest-{arch}-Live-GNOME.iso"
          kde:
            label: "KDE"
            url: "https://kitten.repo.almalinux.org/{major}/live/{arch}/AlmaLinux-Kitten-10-latest-{arch}-Live-KDE.iso"
      raspberrypi:
        # Raspberry Pi images are aarch64-only.
        arches: ["aarch64"]
        url: "https://kitten.repo.almalinux.org/{major}/raspberrypi/images/"
      vagrant:
        arches: ["x86_64", "x86_64_v2"]

  - id: "9"
    label: "AlmaLinux 9"
    arches: ["x86_64", "aarch64", "s390x", "ppc64le"]
    patterns:
      iso:
      cloud:
        aws:
          arches: ["x86_64", "aarch64"]
          sellerProfileUrl: "https://aws.amazon.com/marketplace/pp/prodview-ykmb6re2rcouy"
          marketplaceUrls:
            x86_64: "https://aws.amazon.com/marketplace/pp/prodview-ykmb6re2rcouy"
            aarch64: "https://aws.amazon.com/marketplace/pp/prodview-pvttztrj2uzjk"
        googleCloud:
          arches: ["x86_64"]
          marketplaceBrowseUrl: "https://console.cloud.google.com/marketplace/browse?filter=partner:AlmaLinux"
          productUrl: "https://console.cloud.google.com/marketplace/product/almalinux-cloud/almalinux-{major}"
        azure:
          arches: ["x86_64", "aarch64"]
        openNebula:
          arches: ["x86_64", "x86_64_v2", "aarch64"]
        oci:
          arches: ["x86_64", "aarch64"]
          marketplaceUrls:
            x86_64: "https://cloudmarketplace.oracle.com/marketplace/en_US/listing/127985411"
            aarch64: "https://cloudmarketplace.oracle.com/marketplace/en_US/listing/127985893"
      container:
        bootc:
          arches: ["x86_64", "x86_64_v2", "aarch64"]
      live:
        arches: ["x86_64", "aarch64"]
        variants:
          gnome:
            label: "GNOME"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-GNOME.iso"
          gnomeMini:
            label: "GNOME Mini"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-GNOME-Mini.iso"
          kde:
            label: "KDE"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-KDE.iso"
          xfce:
            label: "XFCE"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-XFCE.iso"
          mate:
            label: "MATE"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-MATE.iso"
      raspberrypi:
        arches: ["aarch64"]
      vagrant:
        arches: ["x86_64", "aarch64"]
      incusLxc:
        arches: ["x86_64", "aarch64"]
      wsl:
        arches: ["x86_64", "aarch64"]
        storeUrl: "https://apps.microsoft.com/store/detail/almalinux-{major}/9P5RWLM70SN9"

  - id: "8"
    label: "AlmaLinux 8"
    arches: ["x86_64", "aarch64", "s390x", "ppc64le"]
    patterns:
      iso:
      cloud:
        aws:
          arches: ["x86_64", "aarch64"]
          sellerProfileUrl: "https://aws.amazon.com/marketplace/seller-profile?id=529d1014-352c-4bed-8b63-6120e4bd3342"
          marketplaceUrls:
            x86_64: "https://aws.amazon.com/marketplace/pp/prodview-mku4y3g4sjrye"
            aarch64: "https://aws.amazon.com/marketplace/pp/prodview-zgsymdwitnxmm"
        googleCloud:
          arches: ["x86_64"]
          marketplaceBrowseUrl: "https://console.cloud.google.com/marketplace/browse?filter=partner:AlmaLinux"
          productUrl: "https://console.cloud.google.com/marketplace/product/almalinux-cloud/almalinux-8"
        azure:
          arches: ["x86_64", "aarch64"]
        openNebula:
          arches: ["x86_64", "x86_64_v2", "aarch64"]
        oci:
          arches: ["x86_64", "aarch64"]
          marketplaceUrls:
            x86_64: "https://cloudmarketplace.oracle.com/marketplace/en_US/listing/125544666"
            aarch64: "https://cloudmarketplace.oracle.com/marketplace/en_US/listing/125567282"
      container:
        bootc: # No bootc images for AlmaLinux 8
      live:
        arches: ["x86_64"]
        variants:
          gnome:
            label: "GNOME"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-GNOME.iso"
          gnomeMini:
            label: "GNOME Mini"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-GNOME-Mini.iso"
          kde:
            label: "KDE"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-KDE.iso"
          xfce:
            label: "XFCE"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-XFCE.iso"
          mate:
            label: "MATE"
            url: "https://repo.almalinux.org/almalinux/{major}/live/{arch}/AlmaLinux-{full}-{arch}-Live-MATE.iso"
      raspberrypi:
        arches: ["aarch64"]
      vagrant:
        arches: ["x86_64", "aarch64"]
      incusLxc:
        arches: ["x86_64", "aarch64"]
      wsl:
        arches: ["x86_64", "aarch64"]
        storeUrl: "https://apps.microsoft.com/store/detail/almalinux-{major}-wsl/9NMD96XJJ19F"
